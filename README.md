# 🌳路由树

- v1：极简路由树设计
- v2：支持 * 匹配路由
- v3：支持复杂匹配
- v4: 优化

## v1：极简路由树设计

- 不考虑路径参数问题：例如/user/:id 等，只支持静态路由
- 不考虑 http method: 例如暂时区分 GET /user 还是 POST /user
- 不考虑性能问题：这是为了排除干扰，减少代码的复杂度
- 不支持路由冲突

## v2：支持 * 匹配路由

- 匹配原则
- 校验 *

### 匹配原则

1. 用户注册了一个路由 /order/*
2. 用户又注册了一个路由 /order/order_sn

请求 /order/order_sn 该命中哪一个？

答案：我们遵循最“详细”原则

按照一般的说法，应该是最左最长匹配，所以应该命中 /order/order_sn，而不是 /order/*

### 校验 *

如果存在，必须在最后一个，并且它前面必须是/

即我们只接受 /* 的存在，abc*这种是非法

## v3：支持复杂匹配

- v3 支持路径参数 :id
- 根据节点类型的优先级，对应不同的匹配方法

## v4: 优化

- 将 children 进一步抽象，快速定位可能匹配的子节点
- 扩展接口，允许用户无侵入式扩展自己的路由规则

